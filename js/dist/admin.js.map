{"version":3,"file":"admin.js","mappings":"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","sources":["webpack://@foskym/flarum-multi-mailer/webpack/bootstrap","webpack://@foskym/flarum-multi-mailer/webpack/runtime/compat get default export","webpack://@foskym/flarum-multi-mailer/webpack/runtime/define property getters","webpack://@foskym/flarum-multi-mailer/webpack/runtime/hasOwnProperty shorthand","webpack://@foskym/flarum-multi-mailer/webpack/runtime/make namespace object","webpack://@foskym/flarum-multi-mailer/external root \"flarum.core.compat['common/extenders']\"","webpack://@foskym/flarum-multi-mailer/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@foskym/flarum-multi-mailer/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@foskym/flarum-multi-mailer/external root \"flarum.core.compat['common/Model']\"","webpack://@foskym/flarum-multi-mailer/./src/common/models/MultiMailer.js","webpack://@foskym/flarum-multi-mailer/./src/common/extend.js","webpack://@foskym/flarum-multi-mailer/external root \"flarum.core.compat['admin/app']\"","webpack://@foskym/flarum-multi-mailer/external root \"flarum.core.compat['common/extend']\"","webpack://@foskym/flarum-multi-mailer/external root \"flarum.core.compat['admin/components/MailPage']\"","webpack://@foskym/flarum-multi-mailer/external root \"flarum.core.compat['common/components/LinkButton']\"","webpack://@foskym/flarum-multi-mailer/external root \"flarum.core.compat['admin/components/ExtensionPage']\"","webpack://@foskym/flarum-multi-mailer/external root \"flarum.core.compat['common/components/Button']\"","webpack://@foskym/flarum-multi-mailer/external root \"flarum.core.compat['common/components/Modal']\"","webpack://@foskym/flarum-multi-mailer/external root \"flarum.core.compat['common/utils/Stream']\"","webpack://@foskym/flarum-multi-mailer/./src/admin/components/MailerModal.js","webpack://@foskym/flarum-multi-mailer/./src/admin/components/MailerSettingsPage.js","webpack://@foskym/flarum-multi-mailer/./src/admin/index.tsx"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extenders'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Model'];","import Model from 'flarum/common/Model';\n\nexport default class MultiMailer extends Model {\n  id = Model.attribute('id');\n  mail_suffix = Model.attribute('mail_suffix');\n  mail_host = Model.attribute('mail_host');\n  mail_port = Model.attribute('mail_port');\n  mail_username = Model.attribute('mail_username');\n  mail_password = Model.attribute('mail_password');\n  mail_encryption = Model.attribute('mail_encryption');\n  mail_from = Model.attribute('mail_from');\n}\n","import Extend from 'flarum/common/extenders';\nimport MultiMailer from \"./models/MultiMailer\";\n\nexport default [\n  new Extend.Store()\n    .add('multi-mailer', MultiMailer)\n];\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/components/MailPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LinkButton'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/components/ExtensionPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Modal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/Stream'];","import app from 'flarum/admin/app';\nimport Modal from 'flarum/common/components/Modal';\nimport Button from 'flarum/common/components/Button';\nimport Stream from 'flarum/common/utils/Stream';\nexport default class MailerModal extends Modal {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.mailer = this.attrs.mailer;\n    this.fields = [\n      'mail_suffix',\n      'mail_host',\n      'mail_port',\n      'mail_username',\n      'mail_password',\n      'mail_encryption',\n      'mail_from'\n    ];\n\n    this.values = this.fields.reduce((values, key) => {\n      values[key] = Stream(this.mailer[key]() || '');\n      return values;\n    }, {});\n  }\n\n  className() {\n    return 'MailerModal Modal--large';\n  }\n\n  title() {\n    return 'Edit';\n  }\n\n  content() {\n    return (\n      <div className=\"Modal-body\">\n        <form onsubmit={this.onsubmit.bind(this)}>\n\n          {this.fields.map(key => (\n            <div className=\"Form-group\">\n              <label className=\"MailerModal-label\">{app.translator.trans(`core.admin.email.${key}_label`)}</label>\n              <input\n                className=\"FormControl\"\n                bidi={this.values[key]}\n                placeholder={key}\n                disabled={key === 'mail_suffix' && this.mailer.id() === 1}\n              />\n            </div>\n          ))}\n\n          <div className=\"Form-group\">\n            {Button.component({\n              type: 'submit',\n              className: 'Button Button--primary Button--block MailerModal-save',\n              loading: this.loading,\n            }, app.translator.trans('core.admin.settings.submit_button'))}\n          </div>\n        </form>\n      </div>\n    );\n  }\n\n  onsubmit(e) {\n    e.preventDefault();\n\n    this.loading = true;\n\n    const mailerData = this.fields.reduce((data, key) => {\n      data[key] = this.values[key]();\n      return data;\n    }, {});\n\n    this.mailer.save(mailerData).then(() => {\n      this.loading = false;\n      m.redraw();\n      this.hide();\n    });\n  }\n}\n","import app from 'flarum/admin/app';\nimport ExtensionPage from 'flarum/admin/components/ExtensionPage';\nimport Button from 'flarum/common/components/Button';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport MailerModal from \"./MailerModal\";\n\nexport default class MailerSettingsPage extends ExtensionPage {\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.loading = true;\n    this.records = [];\n    app.store.find('multi-mailer').then(records => {\n      this.records = records;\n      this.loading = false;\n      m.redraw();\n    });\n  }\n\n  content() {\n    return (\n      <div className=\"container MultiMailer-container\">\n        <table className=\"MailerSettingsPage-table\">\n          <thead>\n          <tr>\n            <th>Mail Suffix</th>\n            <th>Mail Host</th>\n            <th>Mail Port</th>\n            <th>Mail Username</th>\n            <th>Action</th>\n          </tr>\n          </thead>\n          <tbody>\n          {this.records.map(record => (\n            <tr>\n              <td>{record.mail_suffix()}</td>\n              <td>{record.mail_host()}</td>\n              <td>{record.mail_port()}</td>\n              <td>{record.mail_username()}</td>\n              <td>\n                <Button\n                  className={\"Button Button--icon\"}\n                  icon={\"fas fa-edit\"}\n                  onclick={() => {\n                    app.modal.show(MailerModal, {mailer: record});\n                  }}\n                />\n                <Button\n                  className={\"Button Button--icon\"}\n                  icon={\"fas fa-trash\"}\n                  disabled={this.records.length === 1 || this.loading || record.id() === 1}\n                  onclick={() => {\n                    record.delete().then(() => {\n                      this.records = this.records.filter(r => r !== record);\n                      m.redraw();\n                    });\n                  }}\n                />\n              </td>\n            </tr>\n          ))}\n          <tr>\n            <td colspan=\"4\">\n              <Button\n                className={\"Button Button--block\"}\n                onclick={() => {\n                  app.store.createRecord('multi-mailer')\n                    .save({\n                      mail_suffix: 'new.com',\n                      mail_port: 465,\n                      mail_encryption: 'ssl',\n                    })\n                    .then(mailer => {\n                      this.records.push(mailer);\n                      app.modal.show(MailerModal, {mailer});\n                    });\n                }}\n              >\n                <i className=\"fas fa-plus\"></i> Add\n              </Button>\n            </td>\n          </tr>\n          </tbody>\n        </table>\n\n        <LinkButton href={app.route('mail')}>\n          Select mail driver and test\n        </LinkButton>\n      </div>\n    );\n  }\n}\n","import app from 'flarum/admin/app';\nimport { extend, override } from 'flarum/common/extend';\nimport MailPage from 'flarum/admin/components/MailPage';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport MailerSettingsPage from './components/MailerSettingsPage';\n\napp.initializers.add('foskym/flarum-multi-mailer', () => {\n  app.extensionData.for('foskym-multi-mailer').registerPage(MailerSettingsPage);\n\n  override(MailPage.prototype, 'content', function (original) {\n    let content = original();\n    if (this.setting('mail_driver')() !== 'multi-smtp') {\n      return content;\n    }\n    content.children = content.children.concat([\n      <LinkButton\n        className=\"Button\"\n        href={app.route('extension', {\n          id: 'foskym-multi-mailer',\n        })}\n      >\n        Settings for Multi Mailer\n      </LinkButton>,\n    ]);\n    return content;\n  });\n});\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","core","compat","_setPrototypeOf","p","setPrototypeOf","bind","__proto__","_inheritsLoose","subClass","superClass","create","constructor","MultiMailer","_Model","_this","_len","arguments","length","args","Array","_key","apply","concat","id","Model","mail_suffix","mail_host","mail_port","mail_username","mail_password","mail_encryption","mail_from","Extend","add","MailerModal","_Modal","_proto","oninit","vnode","this","mailer","attrs","fields","values","reduce","Stream","className","title","content","_this2","m","onsubmit","map","app","trans","bidi","placeholder","disabled","Button","type","loading","e","_this3","preventDefault","mailerData","data","save","then","redraw","hide","Modal","MailerSettingsPage","_ExtensionPage","records","find","record","icon","onclick","show","filter","r","colspan","createRecord","push","LinkButton","href","ExtensionPage","registerPage","override","MailPage","original","setting","children"],"sourceRoot":""}
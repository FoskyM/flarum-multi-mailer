{"version":3,"file":"admin.js","mappings":"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","sources":["webpack://@foskym/flarum-multi-mailer/webpack/bootstrap","webpack://@foskym/flarum-multi-mailer/webpack/runtime/compat get default export","webpack://@foskym/flarum-multi-mailer/webpack/runtime/define property getters","webpack://@foskym/flarum-multi-mailer/webpack/runtime/hasOwnProperty shorthand","webpack://@foskym/flarum-multi-mailer/webpack/runtime/make namespace object","webpack://@foskym/flarum-multi-mailer/external root \"flarum.core.compat['common/extenders']\"","webpack://@foskym/flarum-multi-mailer/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@foskym/flarum-multi-mailer/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@foskym/flarum-multi-mailer/external root \"flarum.core.compat['common/Model']\"","webpack://@foskym/flarum-multi-mailer/./src/common/models/MultiMailer.js","webpack://@foskym/flarum-multi-mailer/./src/common/extend.js","webpack://@foskym/flarum-multi-mailer/external root \"flarum.core.compat['admin/app']\"","webpack://@foskym/flarum-multi-mailer/external root \"flarum.core.compat['admin/components/ExtensionPage']\"","webpack://@foskym/flarum-multi-mailer/external root \"flarum.core.compat['common/components/Button']\"","webpack://@foskym/flarum-multi-mailer/external root \"flarum.core.compat['common/components/Modal']\"","webpack://@foskym/flarum-multi-mailer/external root \"flarum.core.compat['common/utils/Stream']\"","webpack://@foskym/flarum-multi-mailer/./src/admin/components/MailerModal.js","webpack://@foskym/flarum-multi-mailer/./src/admin/components/MailerSettingsPage.js","webpack://@foskym/flarum-multi-mailer/./src/admin/index.ts"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extenders'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Model'];","import Model from 'flarum/common/Model';\n\nexport default class MultiMailer extends Model {\n  id = Model.attribute('id');\n  mail_suffix = Model.attribute('mail_suffix');\n  mail_host = Model.attribute('mail_host');\n  mail_port = Model.attribute('mail_port');\n  mail_username = Model.attribute('mail_username');\n  mail_password = Model.attribute('mail_password');\n  mail_encryption = Model.attribute('mail_encryption');\n  mail_from = Model.attribute('mail_from');\n}\n","import Extend from 'flarum/common/extenders';\r\nimport MultiMailer from \"./models/MultiMailer\";\r\n\r\nexport default [\r\n  new Extend.Store()\r\n    .add('multi-mailer', MultiMailer)\r\n];\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/components/ExtensionPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Modal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/Stream'];","import app from 'flarum/admin/app';\nimport Modal from 'flarum/common/components/Modal';\nimport Button from 'flarum/common/components/Button';\nimport Stream from 'flarum/common/utils/Stream';\nexport default class MailerModal extends Modal {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.mailer = this.attrs.mailer;\n    this.fields = [\n      'mail_suffix',\n      'mail_host',\n      'mail_port',\n      'mail_username',\n      'mail_password',\n      'mail_encryption',\n      'mail_from'\n    ];\n\n    this.values = this.fields.reduce((values, key) => {\n      values[key] = Stream(this.mailer[key]() || '');\n      return values;\n    }, {});\n  }\n\n  className() {\n    return 'MailerModal Modal--large';\n  }\n\n  title() {\n    return 'Edit';\n  }\n\n  content() {\n    return (\n      <div className=\"Modal-body\">\n        <form onsubmit={this.onsubmit.bind(this)}>\n\n          {this.fields.map(key => (\n            <div className=\"Form-group\">\n              <label className=\"MailerModal-label\">{app.translator.trans(`core.admin.email.${key}_label`)}</label>\n              <input\n                className=\"FormControl\"\n                bidi={this.values[key]}\n                placeholder={key}\n                disabled={key === 'mail_suffix' && this.mailer.id() === 1}\n              />\n            </div>\n          ))}\n\n          <div className=\"Form-group\">\n            {Button.component({\n              type: 'submit',\n              className: 'Button Button--primary Button--block MailerModal-save',\n              loading: this.loading,\n            }, app.translator.trans('core.admin.settings.submit_button'))}\n          </div>\n        </form>\n      </div>\n    );\n  }\n\n  onsubmit(e) {\n    e.preventDefault();\n\n    this.loading = true;\n\n    const mailerData = this.fields.reduce((data, key) => {\n      data[key] = this.values[key]();\n      return data;\n    }, {});\n\n    this.mailer.save(mailerData).then(() => {\n      this.loading = false;\n      m.redraw();\n      this.hide();\n    });\n  }\n}\n","import app from 'flarum/admin/app';\r\nimport ExtensionPage from 'flarum/admin/components/ExtensionPage';\r\nimport Button from 'flarum/common/components/Button';\r\nimport MailerModal from \"./MailerModal\";\r\n\r\nexport default class MailerSettingsPage extends ExtensionPage {\r\n  oninit(vnode) {\r\n    super.oninit(vnode);\r\n    this.loading = true;\r\n    this.records = [];\r\n    app.store.find('multi-mailer').then(records => {\r\n      this.records = records;\r\n      this.loading = false;\r\n      m.redraw();\r\n    });\r\n  }\r\n\r\n  content() {\r\n    return (\r\n      <div className=\"container MultiMailer-container\">\r\n        <table className=\"MailerSettingsPage-table\">\r\n          <thead>\r\n            <tr>\r\n              <th>Mail Suffix</th>\r\n              <th>Mail Host</th>\r\n              <th>Mail Port</th>\r\n              <th>Mail Username</th>\r\n              <th>Action</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {this.records.map(record => (\r\n              <tr>\r\n                <td>{record.mail_suffix()}</td>\r\n                <td>{record.mail_host()}</td>\r\n                <td>{record.mail_port()}</td>\r\n                <td>{record.mail_username()}</td>\r\n                <td>\r\n                  <Button\r\n                    className={\"Button Button--icon\"}\r\n                    icon={\"fas fa-edit\"}\r\n                    onclick={() => {\r\n                      app.modal.show(MailerModal, { mailer: record });\r\n                    }}\r\n                  />\r\n                  <Button\r\n                    className={\"Button Button--icon\"}\r\n                    icon={\"fas fa-trash\"}\r\n                    disabled={this.records.length === 1 || this.loading || record.id() === 1}\r\n                    onclick={() => {\r\n                      record.delete().then(() => {\r\n                        this.records = this.records.filter(r => r !== record);\r\n                        m.redraw();\r\n                      });\r\n                    }}\r\n                  />\r\n                </td>\r\n              </tr>\r\n            ))}\r\n            <tr>\r\n              <td colspan=\"4\">\r\n                <Button\r\n                  className={\"Button Button--block\"}\r\n                  onclick={() => {\r\n                    app.store.createRecord('multi-mailer').save(\r\n                      {\r\n                        mail_suffix: 'new.com',\r\n                        mail_port: 465,\r\n                        mail_encryption: 'ssl',\r\n                      }\r\n                    ).then(mailer => {\r\n                      this.records.push(mailer);\r\n                      app.modal.show(MailerModal, { mailer });\r\n                    });\r\n                  }}\r\n                >\r\n                  <i className=\"fas fa-plus\"></i> Add\r\n                </Button>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import app from 'flarum/admin/app';\nimport MailerSettingsPage from \"./components/MailerSettingsPage\";\n\napp.initializers.add('foskym/flarum-multi-mailer', () => {\n  app.extensionData\n    .for('foskym-multi-mailer')\n    .registerPage(MailerSettingsPage);\n});\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","core","compat","_setPrototypeOf","p","setPrototypeOf","bind","__proto__","_inheritsLoose","subClass","superClass","create","constructor","MultiMailer","_Model","_this","_len","arguments","length","args","Array","_key","apply","concat","id","Model","mail_suffix","mail_host","mail_port","mail_username","mail_password","mail_encryption","mail_from","Extend","add","MailerModal","_Modal","_proto","oninit","vnode","this","mailer","attrs","fields","values","reduce","Stream","className","title","content","_this2","m","onsubmit","map","app","trans","bidi","placeholder","disabled","Button","type","loading","e","_this3","preventDefault","mailerData","data","save","then","redraw","hide","Modal","MailerSettingsPage","_ExtensionPage","records","find","record","icon","onclick","show","filter","r","colspan","createRecord","push","ExtensionPage","registerPage"],"sourceRoot":""}